<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ciallo～(∠・ω< )⌒★</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <style>
        body {
            -webkit-user-select: none; /* Chrome, Safari, Opera */
            -moz-user-select: none; /* Firefox */
            -ms-user-select: none; /* Internet Explorer/Edge */
            user-select: none; /* Non-prefixed version, currently supported by Chrome, Firefox, and Opera */
        }
    </style>
</head>
<style>
    @keyframes moveRightToLeft {
        from { transform: translateX(100%); }
        to { transform: translateX(-1000%); }
    }

    .marquee-container {
        overflow: hidden;
        white-space: nowrap;
        position: relative;
        height: 100%; /* 设定容器的高度 */
    }

    .marquee-content {
        display: inline-block;
        position: absolute;
        animation: moveRightToLeft linear infinite;
    }
</style>
<style>
    .center {
        width: 540px;
        height: 50%;
        margin: auto;
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
    }
</style>
<body>
   <div class="marquee-container" id="marquee-container"></div>
    <div id="main" class="center">
        <img src="ciallo.gif">
    </div>
    <div style="text-align: center;">
        <a href="https://github.com/asdwrg" rel="noreferrer" target="_blank">asdwrg</a>
        <a href="https://www.bilibili.com/video/BV1aG411q7PP/" rel="noreferrer" target="_blank">(●'◡'●)</a>
    </div>
</body>
</html>
<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<script type="text/javascript">
    let a_idx = 0;

    let ac = new AudioContext();

    $(function (){
        $("body").click(function(e) {
            const a = new Array("Ciallo～(∠・ω< )⌒★", "Ciallo～(∠・ω< )⌒☆");
            const $i = $("<span/>").text(a[a_idx]);
            a_idx = (a_idx + 1) % a.length;
            const x = e.pageX,
                y = e.pageY;
            $i.css({
                "z-index": 999999999999999999999999999999999999999999999999999999999999999999999,
                "top": y - 20,
                "left": x,
                "position": "absolute",
                "font-weight": "bold",
                "color": color16()
            });
            $("body").append($i);
            load_sound('ciallo.aac');
            $i.animate({
                    "top": y - 180,
                    "opacity": 0
                },
                1500,
                function() {
                    $i.remove();
                });
        });
    })

    function color16(){
        const r = Math.floor(Math.random()*256);
        const g = Math.floor(Math.random()*256);
        const b = Math.floor(Math.random()*256);
        return `#${r.toString(16)}${g.toString(16)}${b.toString(16)}`;
    }

    function getRandomSpeed() {
        return Math.floor(Math.random() * 25) + 17; // 15 到 42 之间的随机速度
    }

    function getRandomFontSize() {
        return Math.floor(Math.random() * 25) + 15 + 'px'; // 15px 到 40px 之间的随机大小
    }

    function getRandomColor() {
        const letters = '0123456789ABCDEF';
        let color = '#';
        for (let i = 0; i < 6; i++) {
            color += letters[Math.floor(Math.random() * 16)];
        }
        return color;
    }

    const container = document.getElementById('marquee-container');
    const numCharacters = 50; // 要生成的字符数量
    for (let i = 0; i < numCharacters; i++) {
        const character = document.createElement('div');
        character.textContent = 'Ciallo～(∠・ω< )⌒★'; // 字符内容
        character.style.color = getRandomColor(); // 设置字符颜色
        character.style.fontSize = getRandomFontSize(); // 设置字符大小
        character.style.animationDuration = getRandomSpeed() + 's'; // 设置字符速度
        character.classList.add('marquee-content');
        character.style.right = 0; // 设置初始水平位置在右侧
        character.style.top = Math.random() * container.clientHeight + 'px'; // 设置随机初始垂直位置
        container.appendChild(character);
    }
    
    function load_sound(url_data) {
        const req = new XMLHttpRequest();
        req.open('GET', url_data, true);
        req.responseType = 'arraybuffer';
        req.onload = function() {
            ac.decodeAudioData(req.response, function(buffer){
                const source = ac.createBufferSource();
                source.buffer = buffer;
                source.connect(ac.destination);
                source.start(0);
            },function (e) {
                console.info('错误');
            });
        }
        req.send();
    }
</script>
